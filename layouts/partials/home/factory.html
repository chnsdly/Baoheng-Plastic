{{ $factory := .Params.factory }}
{{ if $factory.enable }}
<section class="factory" aria-labelledby="factory-title">
  <div class="container container--wide">
    <div class="factory__header">
      <h2 class="factory__title" id="factory-title">{{ $factory.title }}</h2>
      {{ with $factory.description }}
      <p class="factory__description">{{ . }}</p>
      {{ end }}
    </div>
    <div class="factory__grid">
      {{ range $index, $item := $factory.items }}
      <article class="factory__item">
        <figure
          class="factory__media"
          tabindex="0"
          aria-labelledby="factory-item-{{ $index }}-title"
          aria-describedby="factory-item-{{ $index }}-content"
        >
          <div class="factory__flip">
            <div class="factory__face factory__face--front">
              {{ partial "picture.html" (dict
                "ctx"   $
                "src"   $item.image
                "alt"   $item.title
                "class" "factory__image"
                "sizes" "(max-width: 576px) 100vw, (max-width: 1024px) 50vw, 25vw"
                "w"     (slice 320 480 640 768 896 1024)
                "lqip"  true
              ) }}
              <div class="factory__shine" aria-hidden="true"></div>
            </div>
            <figcaption class="factory__face factory__face--back factory__overlay">
              <h3 class="factory__item-title" id="factory-item-{{ $index }}-title">{{ $item.title }}</h3>
              <p class="factory__item-text" id="factory-item-{{ $index }}-content">{{ $item.content }}</p>
            </figcaption>
          </div>
        </figure>
      </article>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}
