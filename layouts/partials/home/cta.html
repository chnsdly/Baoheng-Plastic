{{ $site := .Site }}
{{ $params := $site.Params }}
{{ $phone := $params.contact_phone }}
{{ $email := $params.contact_email }}
{{ $address := $params.contact_address }}
{{ $phoneHref := "" }}
{{ if $phone }}
  {{ $phoneHref = printf "tel:%s" (replaceRE "[^\\d+]" "" $phone) }}
{{ end }}
{{ $emailHref := "" }}
{{ if $email }}
  {{ $emailHref = printf "mailto:%s" $email }}
{{ end }}

<section class="cta" aria-labelledby="cta-title">
  <div class="container container--wide">
    <div class="cta__grid">
      <div class="cta__intro">
        <p class="cta__eyebrow">{{ i18n "cta_eyebrow" | default "Talk with a specialist" }}</p>
        <h2 id="cta-title" class="cta__title">{{ i18n "cta_title" | default "Ready to design your next plastic pallet?" }}</h2>
        <p class="cta__desc">{{ i18n "cta_subtitle" | default "Tell us how your pallets need to perform and we will reply within one business day." }}</p>
        <ul class="cta__contact" aria-label="{{ i18n "contact_us" | default "Contact us" }}">
          {{ with $phone }}
          <li class="cta__contact-item">
            <p class="cta__label">
              <span class="cta__icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" role="presentation" aria-hidden="true" focusable="false">
                  <path d="M9.5 3.5 6.7 5.3a2 2 0 0 0-.9 1.7c0 7 5.5 12.5 12.5 12.5a2 2 0 0 0 1.7-.9l1.8-2.8c.3-.5.2-1.2-.3-1.6l-3-2.3a1 1 0 0 0-1.2.1l-1.7 1.5a.7.7 0 0 1-.8.1 9.8 9.8 0 0 1-4.1-4.2.7.7 0 0 1 .1-.8l1.5-1.7a1 1 0 0 0 .1-1.2l-2.3-3c-.4-.5-1.1-.6-1.6-.3Z" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
              {{ i18n "phone" | default "Phone" }}
            </p>
            <p class="cta__value">
              <a href="{{ $phoneHref }}">{{ . }}</a>
            </p>
          </li>
          {{ end }}

          {{ with $email }}
          <li class="cta__contact-item">
            <p class="cta__label">
              <span class="cta__icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" role="presentation" aria-hidden="true" focusable="false">
                  <path d="M4.5 6.75h15a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-.75.75h-15a.75.75 0 0 1-.75-.75v-9a.75.75 0 0 1 .75-.75Z" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round" />
                  <path d="m4.5 7.5 7.5 5.25L19.5 7.5" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
              {{ i18n "email" | default "Email" }}
            </p>
            <p class="cta__value">
              <a href="{{ $emailHref }}">{{ . }}</a>
            </p>
          </li>
          {{ end }}

          {{ with $address }}
          <li class="cta__contact-item">
            <p class="cta__label">
              <span class="cta__icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" role="presentation" aria-hidden="true" focusable="false">
                  <path d="M12 3.75a5.25 5.25 0 0 0-5.25 5.25c0 3.6 3.35 7.28 4.9 8.83a.5.5 0 0 0 .7 0c1.55-1.55 4.9-5.23 4.9-8.83A5.25 5.25 0 0 0 12 3.75Z" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round" />
                  <circle cx="12" cy="9" r="1.75" fill="none" stroke="currentColor" stroke-width="1.5" />
                </svg>
              </span>
              {{ i18n "address_title" | default "Address" }}
            </p>
            <p class="cta__value">{{ . }}</p>
          </li>
          {{ end }}
        </ul>
      </div>

      <div class="cta__form">
        <div class="cta__card" aria-label="{{ i18n "contact_us" | default "Contact us" }}">
          <div class="cta__form-head">
            <h3 class="cta__form-title">{{ i18n "cta_form_title" | default "Get a tailored quote" }}</h3>
          </div>
          {{ partial "lead-form.html" (dict "type" "contact" "page" . "sitekey" $params.turnstile_site_key) }}
        </div>
      </div>
    </div>
  </div>
</section>
