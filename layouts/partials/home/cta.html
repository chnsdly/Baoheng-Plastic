{{ $site := .Site }}
{{ $params := $site.Params }}
{{ $phone := $params.contact_phone }}
{{ $email := $params.contact_email }}
{{ $address := $params.contact_address }}
{{ $phoneHref := "" }}
{{ if $phone }}
  {{ $phoneHref = printf "tel:%s" (replaceRE "[^\\d+]" "" $phone) }}
{{ end }}
{{ $emailHref := "" }}
{{ if $email }}
  {{ $emailHref = printf "mailto:%s" $email }}
{{ end }}

<section class="cta" aria-labelledby="cta-title">
  <div class="container container--wide">
    <div class="cta__grid">
      <div class="cta__intro">
        <div class="cta__header">
          <p class="cta__eyebrow">{{ i18n "cta_eyebrow" | default "Talk with a specialist" }}</p>
          <div class="cta__chips" aria-hidden="true">
            <span class="cta__chip">Precision pallet design</span>
            <span class="cta__chip cta__chip--ghost">Avg. response in <strong>24h</strong></span>
          </div>
        </div>
        <h2 id="cta-title" class="cta__title">{{ i18n "cta_title" | default "Ready to design your next plastic pallet?" }}</h2>
        <p class="cta__desc">{{ i18n "cta_subtitle" | default "Tell us how your pallets need to perform and we will reply within one business day." }}</p>
        <p class="cta__meta">Trusted by logistics leaders for tailored, durable pallet solutions with dedicated engineer support.</p>
        <ul class="cta__contact" aria-label="{{ i18n "contact_us" | default "Contact us" }}">
          {{ with $phone }}
          <li class="cta__contact-item">
            <p class="cta__label">
              <span class="cta__icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" role="presentation">
                  <path d="M2.25 5.25c0 10.355 8.395 18.75 18.75 18.75.621 0 1.152-.422 1.278-1.033l.923-4.617a1.125 1.125 0 0 0-.648-1.254l-3.962-1.584a1.125 1.125 0 0 0-1.317.335l-1.845 2.257a16.568 16.568 0 0 1-7.438-7.438l2.257-1.845a1.125 1.125 0 0 0 .335-1.317L8.884 3.6a1.125 1.125 0 0 0-1.254-.648L3.013 3.875A1.125 1.125 0 0 0 1.98 5.153z" />
                </svg>
              </span>
              {{ i18n "phone" | default "Phone" }}
            </p>
            <p class="cta__value">
              <a href="{{ $phoneHref }}">{{ . }}</a>
            </p>
          </li>
          {{ end }}

          {{ with $email }}
          <li class="cta__contact-item">
            <p class="cta__label">
              <span class="cta__icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" role="presentation">
                  <path d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75" />
                  <path d="M21.75 6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25" />
                  <path d="M21.75 7.003a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.919A2.25 2.25 0 0 1 2.25 7.003" />
                </svg>
              </span>
              {{ i18n "email" | default "Email" }}
            </p>
            <p class="cta__value">
              <a href="{{ $emailHref }}">{{ . }}</a>
            </p>
          </li>
          {{ end }}

          {{ with $address }}
          <li class="cta__contact-item">
            <p class="cta__label">
              <span class="cta__icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" role="presentation">
                  <path d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                  <path d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" />
                </svg>
              </span>
              {{ i18n "address_title" | default "Address" }}
            </p>
            <p class="cta__value">{{ . }}</p>
          </li>
          {{ end }}
        </ul>
      </div>

      <div class="cta__form">
        <div class="cta__card" aria-label="{{ i18n "contact_us" | default "Contact us" }}">
          <div class="cta__form-head">
            <h3 class="cta__form-title">{{ i18n "cta_form_title" | default "Get a tailored quote" }}</h3>
          </div>
          {{ partial "lead-form.html" (dict "type" "contact" "page" . "sitekey" $params.turnstile_site_key) }}
        </div>
      </div>
    </div>
  </div>
</section>
