{{ define "main" }}
<section class="about">
  {{- $hero := .Params.hero -}}
  {{- with $hero }}
  <div class="about__hero">
    <div class="container container--wide">
      <div class="about__hero-inner">
        {{- with .badge }}<div class="about__hero-badge">{{ . }}</div>{{ end }}
        {{- with .title }}<h1 class="about__hero-title">{{ . }}</h1>{{ end }}
        {{- with .subtitle }}<p class="about__hero-sub">{{ . }}</p>{{ end }}
        {{- with .proofs }}
        <div class="about__hero-proof">
          {{- range . }}
          <div class="chip"{{ with .title }} title="{{ . }}"{{ end }}>
            {{- $icon := .icon -}}
            {{- if eq $icon "founded" }}<svg aria-hidden="true" viewBox="0 0 24 24"><path d="M6 22V8l6-5 6 5v14H6zM9 22v-6h6v6"/></svg>{{ end }}
            {{- if eq $icon "plant" }}<svg aria-hidden="true" viewBox="0 0 24 24"><path d="M3 3h18v4H3zM5 7h14v14H5z"/></svg>{{ end }}
            {{- if eq $icon "coverage" }}<svg aria-hidden="true" viewBox="0 0 24 24"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 0c3 2 5 6 5 10s-2 8-5 10m0-20C9 4 7 8 7 12s2 8 5 10"/></svg>{{ end }}
            <span>{{ .text }}</span>
          </div>
          {{- end }}
        </div>
        {{- end }}
        {{- with .cta }}
        <div class="about__hero-cta">
          <a class="button button--primary" href="{{ .href }}" aria-label="{{ or .ariaLabel .label }}">{{ .label }}</a>
        </div>
        {{- end }}
      </div>
    </div>
  </div>
  {{- end }}

  {{- with .Params.stats }}
  <div class="about__stats">
    <div class="container">
      <ul class="stats-grid" role="list">
        {{- range . }}
        <li class="stat">
          <div class="stat__num">{{ .num }}</div>
          <div class="stat__label">{{ .label }}</div>
        </li>
        {{- end }}
      </ul>
    </div>
  </div>
  {{- end }}

  {{- $cap := .Params.capabilities -}}
  {{- with $cap }}
  <div id="capabilities" class="about__capabilities">
    <div class="container">
      <div class="section-head">
        {{- with .title }}<h2>{{ . }}</h2>{{ end }}
        {{- with .subtitle }}<p class="muted">{{ . }}</p>{{ end }}
      </div>
      <div class="cards-grid">
        {{- range .cards }}
        <article class="card">
          {{- with .title }}<h3>{{ . }}</h3>{{ end }}
          {{- with .items }}
          <ul class="check-list">
            {{- range . }}
            <li>{{ . }}</li>
            {{- end }}
          </ul>
          {{- end }}
        </article>
        {{- end }}
      </div>
    </div>
  </div>
  {{- end }}

  {{- $timeline := .Params.timeline -}}
  {{- with $timeline }}
  <div class="about__timeline">
    <div class="container container--narrow">
      <div class="section-head">
        {{- with .title }}<h2>{{ . }}</h2>{{ end }}
      </div>
      <ol class="timeline" role="list">
        {{- range .items }}
        <li>
          {{- with .year }}<div class="tl__year">{{ . }}</div>{{ end }}
          {{- with .content }}<div class="tl__content">{{ . }}</div>{{ end }}
        </li>
        {{- end }}
      </ol>
    </div>
  </div>
  {{- end }}

  {{- $global := .Params.global -}}
  {{- with $global }}
  <div class="about__global">
    <div class="container">
      <div class="section-head">
        {{- with .title }}<h2>{{ . }}</h2>{{ end }}
        {{- with .subtitle }}<p class="muted">{{ . }}</p>{{ end }}
      </div>
      <div class="global__grid">
        <div class="global__map" aria-hidden="true">
          {{- with .map }}<img src="{{ . }}" alt="{{ $global.mapAlt }}" loading="lazy">{{ end }}
        </div>
        {{- with .highlights }}
        <div class="global__facts">
          <ul class="check-list">
            {{- range . }}
            <li>{{ . }}</li>
            {{- end }}
          </ul>
        </div>
        {{- end }}
      </div>
    </div>
  </div>
  {{- end }}

  {{- $sus := .Params.sustainability -}}
  {{- with $sus }}
  <div class="about__sustain">
    <div class="container container--narrow">
      <div class="section-head">
        {{- with .title }}<h2>{{ . }}</h2>{{ end }}
      </div>
      <div class="cards-grid">
        {{- range .cards }}
        <article class="card">
          {{- with .title }}<h3>{{ . }}</h3>{{ end }}
          {{- with .content }}<p>{{ . }}</p>{{ end }}
        </article>
        {{- end }}
      </div>
    </div>
  </div>
  {{- end }}
</section>

{{- with .Params.organization }}
<script type="application/ld+json">{{ . | jsonify }}</script>
{{- end }}

<style>
.about { --gap: calc(var(--space) * 3); }
.muted { color: var(--muted); }
.small { font-size: var(--fs-1); }
.section-head { text-align: center; margin-block: calc(var(--space) * 6) calc(var(--space) * 4); }
.section-head h2 { font-size: var(--fs-4); margin: 0 0 calc(var(--space) * 1); }
.section-head p { margin: 0; }

.about__hero { background: linear-gradient(180deg, color-mix(in oklch, var(--brand) 20%, transparent), transparent), var(--surface); padding-block: calc(var(--space) * 6); }
.about__hero-inner { max-width: var(--container-narrow); margin: 0 auto; text-align: center; }
.about__hero-badge { display: inline-block; padding: .35rem .75rem; border-radius: var(--radius-pill); background: color-mix(in oklch, var(--brand), white 85%); color: var(--on-surface); border: var(--border-w) solid var(--border); font-size: .875rem; }
.about__hero-title { font-size: var(--fs-5); margin: calc(var(--space) * 2) 0 calc(var(--space) * 2); letter-spacing: -0.02em; }
.about__hero-sub { font-size: var(--fs-2); color: var(--muted); margin: 0 auto calc(var(--space) * 3); max-width: 60ch; }
.about__hero-proof { display: flex; flex-wrap: wrap; gap: var(--gap); justify-content: center; margin-block: calc(var(--space) * 3) calc(var(--space) * 4); }
.chip { display: inline-flex; align-items: center; gap: .5rem; padding: .5rem .75rem; border-radius: var(--radius-pill); border: var(--border-w) solid var(--border); background: var(--card); color: var(--on-card); box-shadow: var(--shadow); }
.chip svg { width: 18px; height: 18px; fill: currentColor; opacity: .7; }
.about__hero-cta { display: flex; gap: var(--gap); justify-content: center; }

.about__stats { padding-block: calc(var(--space) * 6); }
.stats-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: var(--gap); list-style: none; padding: 0; margin: 0; }
@media (min-width: 48rem) { .stats-grid { grid-template-columns: repeat(4, 1fr); } }
.stat { text-align: center; padding: calc(var(--space) * 3); border-radius: var(--radius); background: var(--card); border: var(--border-w) solid var(--border); box-shadow: var(--shadow); }
.stat__num { font-size: clamp(2rem, 1.2rem + 3vw, 3rem); letter-spacing: -0.02em; font-weight: 700; }
.stat__label { color: var(--muted); margin-top: .25rem; }

.cards-grid { display: grid; gap: var(--gap); grid-template-columns: 1fr; }
@media (min-width: 48rem) { .cards-grid { grid-template-columns: repeat(3, 1fr); } }
.card { background: var(--card); color: var(--on-card); border: var(--border-w) solid var(--border); border-radius: var(--radius); padding: calc(var(--space) * 3); box-shadow: var(--shadow); }
.card h3 { margin: 0 0 .5rem; font-size: var(--fs-3); letter-spacing: -0.01em; }
.check-list { list-style: none; padding: 0; margin: 0; display: grid; gap: .5rem; }
.check-list li { position: relative; padding-left: 1.5rem; }
.check-list li::before { content: ""; position: absolute; left: 0; top: .5rem; width: .75rem; height: .75rem; border-radius: 50%; background: var(--brand); }

.about__timeline { padding-block: calc(var(--space) * 6); }
.timeline { --line: color-mix(in oklch, var(--brand), black 60%); list-style: none; padding: 0; margin: 0; position: relative; }
.timeline li { display: grid; grid-template-columns: 6rem 1fr; gap: var(--gap); padding: calc(var(--space) * 2) 0; border-left: 2px solid var(--line); margin-left: 1rem; position: relative; }
.timeline li::before { content: ""; position: absolute; left: -9px; top: calc(50% - 6px); width: 12px; height: 12px; border-radius: 50%; background: var(--brand); box-shadow: 0 0 0 2px var(--surface); }
.tl__year { font-weight: 700; color: var(--muted); }
.tl__content { color: var(--on-surface); }

.about__global { padding-block: calc(var(--space) * 6); }
.global__grid { display: grid; grid-template-columns: 1fr; gap: var(--gap); }
@media (min-width: 64rem) { .global__grid { grid-template-columns: 2fr 1fr; align-items: center; } }
.global__map img { width: 100%; border-radius: var(--radius); border: var(--border-w) solid var(--border); box-shadow: var(--shadow); }

.about__sustain { padding-block: calc(var(--space) * 6); }
</style>
{{ end }}
